import{a as L,t as P}from"./DldQStsR.js";import{i as z}from"./CATt0WfG.js";import{l as O,ap as H,aq as Q,ar as W,u as X,as as Z,at as G,p as ee,au as ae,o as re,e as i,b as u,r as v,h as T,g as s,k as te,c as le,j as E,s as se,av as m,aw as oe}from"./FJRCtc8Y.js";import{a as ne,l as J,e as F,s as ie}from"./CuXJoPns.js";import{e as ue,i as ve}from"./DpdfpHoe.js";import{a as ce}from"./B2zXuP2w.js";function K(e){var a,t,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(a=0;a<r;a++)e[a]&&(t=K(e[a]))&&(l&&(l+=" "),l+=t)}else for(t in e)e[t]&&(l&&(l+=" "),l+=t);return l}function de(){for(var e,a,t=0,l="",r=arguments.length;t<r;t++)(e=arguments[t])&&(a=K(e))&&(l&&(l+=" "),l+=a);return l}function qe(e){return typeof e=="object"?de(e):e??""}function S(e){if(O){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;B(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var r=e.checked;B(e,"checked",null),e.checked=r}}};e.__on_r=t,H(t),ne()}}function B(e,a,t,l){var r=e.__attributes??(e.__attributes={});O&&(r[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||r[a]!==(r[a]=t)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Q]=t),e.removeAttribute(a))}function q(e,a,t=a){var l=W();J(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=M(e)?A(o):o,t(o),l&&o!==(o=a())){var d=e.selectionStart,c=e.selectionEnd;e.value=o??"",c!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(c,e.value.length))}}),(O&&e.defaultValue!==e.value||X(a)==null&&e.value)&&t(M(e)?A(e.value):e.value),Z(()=>{var r=a();M(e)&&r===A(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function M(e){var a=e.type;return a==="number"||a==="range"}function A(e){return e===""?null:+e}function R(e,a,t){if(e.multiple)return be(e,a);for(var l of e.options){var r=_(l);if(ce(r,a)){l.selected=!0;return}}(!t||a!==void 0)&&(e.selectedIndex=-1)}function fe(e,a){G(()=>{var t=new MutationObserver(()=>{var l=e.__value;R(e,l)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function _e(e,a,t=a){var l=!0;J(e,"change",r=>{var o=r?"[selected]":":checked",d;if(e.multiple)d=[].map.call(e.querySelectorAll(o),_);else{var c=e.querySelector(o)??e.querySelector("option:not([disabled])");d=c&&_(c)}t(d)}),G(()=>{var r=a();if(R(e,r,l),l&&r===void 0){var o=e.querySelector(":checked");o!==null&&(r=_(o),t(r))}e.__value=r,l=!1}),fe(e)}function be(e,a){for(var t of e.options)t.selected=~a.indexOf(_(t))}function _(e){return"__value"in e?e.__value:e.value}function me(e){return function(...a){var t=a[0];return t.preventDefault(),e==null?void 0:e.apply(this,a)}}var ye=P("<option> </option>"),pe=P('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"><div class="bg-white rounded-lg p-6 max-w-md w-full"><h2 class="text-xl font-bold mb-4">Create Virtual Machine</h2> <form><div class="mb-4"><label class="block mb-1">Name</label> <input type="text" class="w-full border rounded px-2 py-1" required></div> <div class="mb-4"><label class="block mb-1">CPU Cores</label> <input type="number" class="w-full border rounded px-2 py-1" min="1" required></div> <div class="mb-4"><label class="block mb-1">Memory (MB)</label> <input type="number" class="w-full border rounded px-2 py-1" min="512" required></div> <div class="mb-4"><label class="block mb-1">ISO Image</label> <select class="w-full border rounded px-2 py-1"><option>None</option><!></select></div> <div class="flex justify-end space-x-2"><button type="button" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Cancel</button> <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Create</button></div></form></div></div>');function Me(e,a){ee(a,!1);const t=ae();let l=E([]),r=E({name:"",cores:1,memory:1024,iso:""});async function o(){try{const n=await fetch("/api/isos");se(l,await n.json())}catch(n){console.error("Failed to load ISOs:",n)}}async function d(){try{await fetch("/api/vms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s(r))}),t("created"),t("close")}catch(n){console.error("Failed to create VM:",n)}}re(o),z();var c=pe(),C=i(c),y=u(i(C),2),p=i(y),j=u(i(p),2);S(j),v(p);var h=u(p,2),I=u(i(h),2);S(I),v(h);var g=u(h,2),N=u(i(g),2);S(N),v(g);var x=u(g,2),k=u(i(x),2);T(()=>{s(r),oe(()=>{s(l)})});var w=i(k);w.value=((w.__value="")==null,"");var U=u(w);ue(U,1,()=>s(l),ve,(n,b)=>{var f=ye(),V={},$=i(f,!0);v(f),T(()=>{V!==(V=s(b).name)&&(f.value=(f.__value=s(b).name)==null?"":s(b).name),ie($,s(b).name)}),L(n,f)}),v(k),v(x);var D=u(x,2),Y=i(D);te(2),v(D),v(y),v(C),v(c),q(j,()=>s(r).name,n=>m(r,s(r).name=n)),q(I,()=>s(r).cores,n=>m(r,s(r).cores=n)),q(N,()=>s(r).memory,n=>m(r,s(r).memory=n)),_e(k,()=>s(r).iso,n=>m(r,s(r).iso=n)),F("click",Y,()=>t("close")),F("submit",y,me(d)),L(e,c),le()}export{Me as C,qe as c};
